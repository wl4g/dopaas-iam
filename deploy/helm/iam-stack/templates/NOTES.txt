1. Get your 'admin' user password by running:

    kubectl get secret -n {{ .Release.Namespace }} {{ template "iam-stack.fullname" . }} -o jsonpath="{.data.admin-password}" | base64 --decode ; echo

2. Add istio injection label:

    kubectl label ns {{ .Release.Namespace }} istio-injection=enabled --overwrite

3. Generating self credentials:

    openssl req -x509 -sha256 -nodes -days 365 -newkey rsa:2048 -subj '/O=wl4g Inc./CN=*.wl4g.io' -keyout wl4g.io.key -out wl4g.io.crt
    kubectl create -n istio-system secret tls wl4g-credential --key=wl4g.io.key --cert=wl4g.io.crt

4. The access requests routed through Istio-ingressgateway using NodePort:

    export nodeIp=$(ip a | grep -E '^[0-9]+: (em|eno|enp|ens|eth|wlp)+[0-9]' -A2 | grep inet | awk -F ' ' '{print $2}' | cut -f1 -d/ | head -1)
    export istioInNodePort=$(kubectl -n istio-system get svc istio-ingressgateway -ojson | jq -r '.spec.ports[] | select (.name == "http2") | .nodePort')
    curl -v -H 'Host: iam-web.{{ index .Values "iam-web" "governance" "istio" "ingress" "domain" }}' ${nodeIp}:${istioInNodePort}/login

5. Login with the password from step 1 and the username: 'admin'

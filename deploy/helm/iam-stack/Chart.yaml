# Copyright (c) 2017 ^ 2025, the original author wangl.sir individual Inc,
# All rights reserved. Contact us <jameswong1376@gmail.com, 983708408@qq.com>
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
# @see: https://helm.sh/zh/docs/topics/charts/
#
apiVersion: v2
name: iam-stack
description: A Helm chart for IAM
icon: https://raw.githubusercontent.com/wl4g/iam/master/shots/iam-logo.png?token=GHSAT0AAAAAABWBQKN3QNYHECQ5LR4PCLKMYWGQIGA
# A chart can be either an 'application' or a 'library' chart.
#
# Application charts are a collection of templates that can be packaged into versioned archives
# to be deployed.
#
# Library charts provide useful utilities or functions for the chart developer. They're included as
# a dependency of application charts to inject those utilities and functions into the rendering
# pipeline. Library charts do not define any templates and therefore cannot be deployed.
type: application

# This is the chart version. This version number should be incremented each time you make changes
# to the chart and its templates, including the app version.
# Versions are expected to follow Semantic Versioning (https://semver.org/)
version: 0.1.0

# This is the version number of the application being deployed. This version number should be
# incremented each time you make changes to the application.
appVersion: 3.0.0

# Onwer maintainers.
maintainers:
  - name: James Wong
    email: wanglsir@gmail.com
    url: https://github.com/wl4g

## For best performance, these stateful storage services, which are relied upon below, usually use services
## outside the kubernetes cluster (headless endpoints) in production environments.
## Global values see to: https://github.com/whmzsu/helm-doc-zh-cn/blob/master/chart_template_guide/subcharts_and_globals-zh_cn.md
## Check version matching see to: https://github.com/Masterminds/semver#tilde-range-comparisons-patch
dependencies:
  - name: "iam-web"
    condition: iam-web.enabled
    repository: "file://charts/iam-web"
    version: "~0.1.0"
  - name: "iam-facade"
    condition: iam-facade.enabled
    repository: "file://charts/iam-facade"
    version: "~0.1.0"
  - name: "iam-data"
    condition: iam-data.enabled
    repository: "file://charts/iam-data"
    version: "~0.1.0"
  - name: "redis"
    condition: global.redis.internal.enabled
    repository: "https://charts.bitnami.com/bitnami"
    version: "~17.0.x"
  - name: "mysql"
    condition: global.mysql.internal.enabled
    repository: "https://charts.bitnami.com/bitnami"
    version: "~9.2.x"
  - name: "postgresql"
    condition: global.postgresql.internal.enabled
    repository: "https://charts.bitnami.com/bitnami"
    version: "~11.6.17"
  - name: "kafka"
    condition: global.kafka.internal.enabled
    repository: "https://charts.bitnami.com/bitnami"
    version: "~18.0.3"
  - name: "zookeeper"
    condition: global.zookeeper.internal.enabled
    repository: "https://charts.bitnami.com/bitnami"
    version: "~10.0.2"
  - name: "mongodb"
    condition: global.mongodb.internal.enabled
    repository: "https://charts.bitnami.com/bitnami"
    version: "~12.1.27"
  - name: "elasticsearch"
    condition: global.elasticsearch.internal.enabled
    repository: "https://charts.bitnami.com/bitnami"
    version: "~19.1.6"
  - name: "solr"
    condition: global.solr.internal.enabled
    repository: "https://charts.bitnami.com/bitnami"
    version: "~6.0.6"
  - name: "minio"
    condition: global.minio.internal.enabled
    repository: "https://charts.bitnami.com/bitnami"
    version: "~11.7.13"
  # - name: "vault"
  #   condition: global.vault.enabled
  #   repository: https://helm.releases.hashicorp.com
  #   version: "~0.6.0"
